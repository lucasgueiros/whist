<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>#{propriedades.get('pagina.geral.prefixo')} - 
            #{propriedades.get('pagina.jogar.titulo')}
        </title>
        <style>
            .ui-panelgrid td, .ui-panelgrid tr, .ui-panel td, .ui-panel tr
            {
                border-style: none !important
            }
            img.cartaVertical {
                width: 50px;
            }
            img.cartaHorizontal {
                height: 50px;
            }
            .cartaMenos25 {
                left: -25px;
            }
        </style>
    </h:head>
    <h:body>
        <h:form>
            <ui:include src="#{propriedades.get('pagina.menu')}"/>
            <!-- SerÃ¡ atualizado por ajax a cada 2 segundos! -->
            <p:poll update="@(.frequpdate)" interval="2" />
        </h:form>
        
        

        <p:panel>
            <h:form id="formulario" >
                <h:outputText value="Naipe de trunfo: "/>
                <h:graphicImage value="#{partidaSessionBean.trumphNaipeValue}" alt="#{partidaSessionBean.trumphNaipe}" height="50px"/>
            </h:form>
        </p:panel>

        <p:layout class="frequpdate">
            <p:layoutUnit position="north">
                <h:form id="formulario" >
                    <c:forEach items="#{intervalosBean.getIntevalo(partidaSessionBean.getNumeroCartas('SOUTH'))}" var="carta" varStatus="status">
                        <h:graphicImage style="position: relative; left: #{status.index * -25}px; z-index: #{status.index}" value="versos/versoVertical1.svg" alt="carta" class="cartaVertical"/>
                    </c:forEach>
                </h:form>
            </p:layoutUnit>
            <p:layoutUnit position="east" maxSize="100">
                <h:form id="formulario" >
                    <c:forEach items="#{intervalosBean.getIntevalo(partidaSessionBean.getNumeroCartas('EAST'))}" var="carta" varStatus="status">
                        <h:graphicImage value="versos/versoHorizontal1.svg" alt="carta" class="cartaHorizontal" style="position: relative; up: #{status.index * -25}px; z-index: #{status.index}"/>
                        <br/>
                    </c:forEach>
                </h:form>
            </p:layoutUnit>
            <p:layoutUnit position="west" maxSize="100">
                <h:form id="formulario" >
                    <c:forEach items="#{intervalosBean.getIntevalo(partidaSessionBean.getNumeroCartas('WEST'))}" var="carta" varStatus="status">
                        <h:graphicImage value="versos/versoHorizontal1.svg" alt="carta" class="cartaHorizontal" style="position: relative; up: #{status.index *-25}px; z-index: #{status.index}"/>
                    </c:forEach>
                </h:form>
            </p:layoutUnit>
            <p:layoutUnit position="south">
                <h:form id="formulario" >
                    <c:forEach items="#{partidaSessionBean.cartas}" var="carta" varStatus="lstatus">
                        <p:commandLink  style="position: relative; left: #{status.index * -50}px; z-index: #{status.index}" action="#{partidaSessionBean.play(carta)}">
                            <h:graphicImage  value="#{propriedades.getCarta(carta.naipe.toStringExt(), carta.simbolo.toStringExt())}" alt="#{carta.toString()}" class="cartaVertical"/>
                        </p:commandLink>
                    </c:forEach>
                </h:form>
            </p:layoutUnit>
            <p:layoutUnit position="center">
                <h:form id="formulario" >
                    <table>
                        <tr>
                            <td><h:graphicImage value="cartas/black_joker.svg" class="cartaVertical" style="visibility: hidden"/></td>
                            <td><h:graphicImage alt="#{ partidaSessionBean.getCarta('SOUTH') }" value="#{ partidaSessionBean.getCartaImagem('SOUTH') }" class="cartaVertical"/></td>
                            <td><h:graphicImage value="cartas/black_joker.svg" class="cartaVertical" style="visibility: hidden"/></td>
                        </tr>
                        <tr>
                            <td><h:graphicImage alt="#{ partidaSessionBean.getCarta('EAST') }" value="#{ partidaSessionBean.getCartaImagem('EAST') }" class="cartaVertical"/></td>
                            <td><h:graphicImage value="cartas/black_joker.svg" class="cartaVertical" style="visibility: hidden"/></td>
                            <td><h:graphicImage alt="#{ partidaSessionBean.getCarta('WEST') }" value="#{ partidaSessionBean.getCartaImagem('WEST') }" class="cartaVertical"/></td>
                        </tr>
                        <tr>
                            <td><h:graphicImage value="cartas/black_joker.svg" class="cartaVertical" style="visibility: hidden"/></td>
                            <td><h:graphicImage alt="#{ partidaSessionBean.getCarta('NORTH') }" value="#{ partidaSessionBean.getCartaImagem('NORTH') }" class="cartaVertical"/></td>
                            <td><h:graphicImage value="cartas/black_joker.svg" class="cartaVertical" style="visibility: hidden"/></td>
                        </tr>
                    </table>
                </h:form>
                </p:layoutUnit>
            </p:layout>
    </h:body>
</html>

